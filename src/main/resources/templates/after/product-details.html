<!DOCTYPE html>
<html class="no-js" lang="zxx" xmlns:th="http://www.thymeleaf.org">

<head>
    <base href="/">
    <meta charset="utf-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge"/>
    <title>Single Product - ShopGrids Bootstrap 5 eCommerce HTML Template.</title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.svg"/>

    <!-- ========================= CSS here ========================= -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="assets/css/LineIcons.3.0.css"/>
    <link rel="stylesheet" href="assets/css/tiny-slider.css"/>
    <link rel="stylesheet" href="assets/css/glightbox.min.css"/>
    <link rel="stylesheet" href="assets/css/main.css?after"/>
    <link rel="stylesheet" href="assets/css/style.css"/>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

</head>

<body>
<!--[if lte IE 9]>
<p class="browserupgrade">
    You are using an <strong>outdated</strong> browser. Please
    <a href="https://browsehappy.com/">upgrade your browser</a> to improve
    your experience and security.
</p>
<![endif]-->

<!-- Preloader -->
<div class="preloader">
    <div class="preloader-inner">
        <div class="preloader-icon">
            <span></span>
            <span></span>
        </div>
    </div>
</div>
<!-- /End Preloader -->

<!-- 헤더 시작 -->
<!-- Start Header Area -->
<header class="header navbar-area">
    <!-- Start Topbar -->
    <div class="topbar">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-4 col-md-4 col-12">
                    <div class="top-left">
                        <ul class="menu-top-link">
                            <li>
                                <div class="select-position">
                                    <select id="select5">
                                        <option value="0" selected>한글</option>
                                        <option value="1">English</option>
                                        <option value="2">Filipino</option>
                                        <option value="3">Français</option>
                                        <option value="4">العربية</option>
                                        <option value="5">हिन्दी</option>
                                        <option value="6">বাংলা</option>
                                    </select>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 col-12">
                    <div class="top-middle">
                        <ul class="useful-links">
                            <li><a th:href="@{/}">홈</a></li>
                            <li><a href="about-us.html">회사소개</a></li>
                            <li><a href="contact.html">연락처</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 col-12">
                    <div class="top-end">
                        <ul class="user-login">
                            <li>
                                <a th:href="@{/admin/adminUser}">관리자 페이지</a>
                            </li>
                            <li>
                                <div class="user">
                                    <i class="lni lni-user"></i>
                                    <a th:href="@{/myPage/{user_id}(user_id=${user_id})}"> Hello </a>
                                </div>
                            </li>
                            <li>
                                <a th:href="@{/logout}">로그아웃</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Topbar -->
    <!-- Start Header Middle -->
    <div class="header-middle">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-3 col-md-3 col-7">
                    <!-- Start Header Logo -->
                    <a class="navbar-brand" th:href="@{/}">
                        <img src="assets/images/logo/logo.svg" alt="Logo">
                    </a>
                    <!-- End Header Logo -->
                </div>
                <div class="col-lg-5 col-md-7 d-xs-none">
                    <!-- Start Main Menu Search -->
                    <div class="main-menu-search">
                        <!-- navbar search start -->
                        <!--검색기능 미완성 미리 만들어놓음-->
                        <form th:action="@{/search}"> <!--th:object="${MemberRequestDto}"-->
                            <div class="navbar-search search-style-5">
                                <div class="search-select">
                                    <div class="select-position">
                                        <select id="select1">
                                            <option selected>All</option>
                                            <option value="1">option 01</option>
                                            <option value="2">option 02</option>
                                            <option value="3">option 03</option>
                                            <option value="4">option 04</option>
                                            <option value="5">option 05</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="search-input">
                                    <input type="text" placeholder="Search">
                                </div>
                                <div class="search-btn">
                                    <button type="submit"><i class="lni lni-search-alt"></i></button>
                                </div>
                            </div>
                        </form>
                        <!-- navbar search Ends -->
                    </div>
                    <!-- End Main Menu Search -->
                </div>
            </div>
        </div>
    </div>
    <!-- End Header Middle -->
    <!-- Start Header Bottom -->
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 col-md-6 col-12">
                <div class="nav-inner">
                    <!-- Start Mega Category Menu -->
                    <div class="mega-category-menu">
                        <span class="cat-button"><i class="lni lni-menu"></i>카테고리</span>
                        <ul class="sub-category">
                            <li><a href="product-grids.html">1 <i class="lni lni-chevron-right"></i></a>
                                <ul class="inner-sub-category">
                                    <li><a href="product-grids.html">1</a></li>
                                    <li><a href="product-grids.html">2</a></li>
                                    <li><a href="product-grids.html">3</a></li>
                                    <li><a href="product-grids.html">4</a></li>
                                    <li><a href="product-grids.html">5</a></li>
                                    <li><a href="product-grids.html">6</a></li>
                                    <li><a href="product-grids.html">7</a></li>
                                    <li><a href="product-grids.html">8</a></li>
                                    <li><a href="product-grids.html">9</a></li>
                                    <li><a href="product-grids.html">10</a></li>
                                </ul>
                            </li>
                            <li><a href="product-grids.html">2</a></li>
                            <li><a href="product-grids.html">3</a></li>
                            <li><a href="product-grids.html">4</a></li>
                            <li><a href="product-grids.html">5</a></li>
                            <li><a href="product-grids.html">6</a></li>
                            <li><a href="product-grids.html">7</a></li>
                            <li><a href="product-grids.html">8</a></li>
                            <li><a href="product-grids.html">9</a></li>
                            <li><a href="product-grids.html">10 </a></li>
                            <li><a href="product-grids.html">11 </a></li>
                            <li><a href="product-grids.html">12 </a></li>
                        </ul>
                    </div>
                    <!-- End Mega Category Menu -->
                    <!-- Start Navbar -->
                    <nav class="navbar navbar-expand-lg">
                        <button class="navbar-toggler mobile-menu-btn" type="button" data-bs-toggle="collapse"
                                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                aria-expanded="false" aria-label="Toggle navigation">
                            <span class="toggler-icon"></span>
                            <span class="toggler-icon"></span>
                            <span class="toggler-icon"></span>
                        </button>
                    </nav>
                    <!-- End Navbar -->
                </div>
            </div>
            <div class="col-lg-4 col-md-6 col-12">
                <!-- Start Nav Social -->
                <div class="nav-social">
                    <h5 class="title">팔로잉:</h5>
                    <ul>
                        <li>
                            <a href="javascript:void(0)"><i class="lni lni-facebook-filled"></i></a>
                        </li>
                        <li>
                            <a href="javascript:void(0)"><i class="lni lni-twitter-original"></i></a>
                        </li>
                        <li>
                            <a href="javascript:void(0)"><i class="lni lni-instagram"></i></a>
                        </li>
                        <li>
                            <a href="javascript:void(0)"><i class="lni lni-skype"></i></a>
                        </li>
                    </ul>
                </div>
                <!-- End Nav Social -->
            </div>
        </div>
    </div>
    <!-- End Header Bottom -->
</header>
<!-- End Header Area -->
<!-- 헤더 끝 -->

<!-- Start Breadcrumbs -->
<div class="breadcrumbs">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 col-md-6 col-12">
                <div class="breadcrumbs-content">
                    <h1 class="page-title">제품 페이지</h1>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-12">
                <ul class="breadcrumb-nav">
                    <li><a href="index.html"><i class="lni lni-home"></i> 홈</a></li>
                    <li><a href="index.html">샵</a></li>
                    <li>제품 페이지</li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- End Breadcrumbs -->

<!-- Start Item Details -->
<section class="item-details section">
    <div class="container">
        <div class="top-area">
            <div class="row align-items-center">
                <div class="col-lg-6 col-md-12 col-12">
                    <div class="product-images">
                        <main id="gallery">
                            <div class="main-img">
                                <img th:src="'imgs/product/'+ ${productImg.product_img_name}" id="current" alt="#">
                            </div>
                            <div class="images">
                                <img th:src="'imgs/product/'+ ${productImg.product_img_name}" class="img" alt="#">
                                <img src="assets/images/product-details/02.jpg" class="img" alt="#">
                                <img src="assets/images/product-details/03.jpg" class="img" alt="#">
                                <img src="assets/images/product-details/04.jpg" class="img" alt="#">
                                <img src="assets/images/product-details/05.jpg" class="img" alt="#">
                            </div>
                        </main>
                    </div>
                </div>
                <div class="col-lg-6 col-md-12 col-12">
                    <div class="product-info">
                        <h2 class="title" th:text="${product.product_name}"> 리뷰 할 제품 이름</h2>
                        <p class="category"><i class="lni lni-tag"></i> 카테고리:<a href="javascript:void(0)">Action
                            cameras</a></p>
                        <div class="single-block give-review">
                            <ul class="stars">

                                <li>
                                    <h4>
                                        <span>총 별점 : </span>
                                    </h4>

                                    <!-- 채워진 별점 -->
                                    <span class="starss"
                                          th:each="i : ${#numbers.sequence(1, product.product_total_rating)}">
                                            <i class="lni lni-star-filled"></i>
                                        </span><span class="starss"
                                                     th:each="i : ${#numbers.sequence(1, 5 - product.product_total_rating)}"><!-- 비어있는 별점 -->
                                            <i class="lni lni-star"></i>
                                        </span>

                                </li>

                                <li>
                                    <h5>
                                        <span>가성비 별점 : </span>
                                    </h5>

                                    <!-- 채워진 별점 -->
                                    <span class="starss"
                                          th:each="i : ${#numbers.sequence(1, product.product_coef_rating)}">
                                            <i class="lni lni-star-filled"></i>
                                        </span><span class="starss"
                                                     th:each="i : ${#numbers.sequence(1, 5 - product.product_coef_rating)}"><!-- 비어있는 별점 -->
                                            <i class="lni lni-star"></i>
                                        </span>

                                </li>

                                <li>
                                    <h5>
                                        <span>내구성 별점 : </span>
                                    </h5>
                                    <span class="starss"
                                          th:each="i : ${#numbers.sequence(1, product.product_durability_rating)}">
                                            <i class="lni lni-star-filled"></i>
                                        </span><span class="starss"
                                                     th:each="i : ${#numbers.sequence(1, 5 - product.product_durability_rating)}"><!-- 비어있는 별점 -->
                                            <i class="lni lni-star"></i>
                                        </span>

                                </li>

                                <li>
                                    <h5>
                                        <span>품질 별점 : </span>
                                    </h5>
                                    <span class="starss"
                                          th:each="i : ${#numbers.sequence(1, product.product_quality_rating)}">
                                            <i class="lni lni-star-filled"></i>
                                        </span><span class="starss"
                                                     th:each="i : ${#numbers.sequence(1, 5 - product.product_quality_rating)}"><!-- 비어있는 별점 -->
                                            <i class="lni lni-star"></i>
                                        </span>

                                </li>

                                <li>
                                    <h5>
                                        <span>디자인 별점 : </span>
                                    </h5>
                                    <span class="starss"
                                          th:each="i : ${#numbers.sequence(1, product.product_design_rating)}">
                                            <i class="lni lni-star-filled"></i>
                                        </span><span class="starss"
                                                     th:each="i : ${#numbers.sequence(1, 5 - product.product_design_rating)}"><!-- 비어있는 별점 -->
                                            <i class="lni lni-star"></i>
                                        </span>
                                    </h5>
                                </li>
                            </ul>
                        </div>
                        <p class="info-text" th:text="${product.product_manu}">제품 정보 설명 하는 구간.</p>
                        <div class="bottom-content">
                            <div class="row align-items-end">
                                <div class="col-lg-4 col-md-4 col-12">
                                    <div class="wish-button">
                                        <button class="btn"
                                                th:data-user-id="${user.user_id}"
                                                th:data-product-id="${product.product_id}"
                                                th:data-isSaved="${product.isSaved}"
                                                onclick="productSave(this)"
                                                th:classappend="${product.isSaved} ? 'saved' : ''">
                                        <i th:if="${product.isSaved}" class="lni lni-heart-filled"></i><i th:if="${!product.isSaved}" class="lni lni-heart"></i>
                                            찜하기</button>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="product-details-info">
            <div class="single-block">
                <div class="row">
                    <div class="col-lg-6 col-12">
                        <div class="info-body custom-responsive-margin">
                            <!-- 시작 -->
                            <!-- ====== Chart Three Start -->
                            <div class="mb-3 justify-between gap-4 sm:flex">
                                <div>
                                    <h4 class="text-xl font-bold text-black dark:text-white">
                                        별점 퍼센트
                                    </h4>
                                </div>
                                <div>
                                    <div class="relative z-20 inline-block">
                                        <span class="absolute right-3 top-1/2 z-10 -translate-y-1/2">
                                                  <svg
                                                          width="10"
                                                          height="6"
                                                          viewBox="0 0 10 6"
                                                          fill="none"
                                                          xmlns="http://www.w3.org/2000/svg"
                                                  >
                                                    <path
                                                            d="M0.47072 1.08816C0.47072 1.02932 0.500141 0.955772 0.54427 0.911642C0.647241 0.808672 0.809051 0.808672 0.912022 0.896932L4.85431 4.60386C4.92785 4.67741 5.06025 4.67741 5.14851 4.60386L9.09079 0.896932C9.19376 0.793962 9.35557 0.808672 9.45854 0.911642C9.56151 1.01461 9.5468 1.17642 9.44383 1.27939L5.50155 4.98632C5.22206 5.23639 4.78076 5.23639 4.51598 4.98632L0.558981 1.27939C0.50014 1.22055 0.47072 1.16171 0.47072 1.08816Z"
                                                            fill="#637381"
                                                    />
                                                    <path
                                                            fill-rule="evenodd"
                                                            clip-rule="evenodd"
                                                            d="M1.22659 0.546578L5.00141 4.09604L8.76422 0.557869C9.08459 0.244537 9.54201 0.329403 9.79139 0.578788C10.112 0.899434 10.0277 1.36122 9.77668 1.61224L9.76644 1.62248L5.81552 5.33722C5.36257 5.74249 4.6445 5.7544 4.19352 5.32924C4.19327 5.32901 4.19377 5.32948 4.19352 5.32924L0.225953 1.61241C0.102762 1.48922 -4.20186e-08 1.31674 -3.20269e-08 1.08816C-2.40601e-08 0.905899 0.0780105 0.712197 0.211421 0.578787C0.494701 0.295506 0.935574 0.297138 1.21836 0.539529L1.22659 0.546578ZM4.51598 4.98632C4.78076 5.23639 5.22206 5.23639 5.50155 4.98632L9.44383 1.27939C9.5468 1.17642 9.56151 1.01461 9.45854 0.911642C9.35557 0.808672 9.19376 0.793962 9.09079 0.896932L5.14851 4.60386C5.06025 4.67741 4.92785 4.67741 4.85431 4.60386L0.912022 0.896932C0.809051 0.808672 0.647241 0.808672 0.54427 0.911642C0.500141 0.955772 0.47072 1.02932 0.47072 1.08816C0.47072 1.16171 0.50014 1.22055 0.558981 1.27939L4.51598 4.98632Z"
                                                            fill="#637381"
                                                    />
                                                  </svg>
                                            </span>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-2">
                                <div id="chartThree" class="mx-auto flex justify-center"></div>
                            </div>
                            <div class="-mx-8 flex flex-wrap items-center justify-center gap-y-3">
                                <div class="w-full px-8 sm:w-1/2">
                                    <div class="flex w-full items-center">
                                            <span
                                                    class="mr-2 block h-3 w-full max-w-3 rounded-full bg-primary"
                                            ></span>
                                        <p
                                                class="flex w-full justify-between text-sm font-medium text-black dark:text-white"
                                        >
                                            <span> 5점 </span>
                                            <span> 65% </span>
                                        </p>
                                    </div>
                                </div>
                                <div class="w-full px-8 sm:w-1/2">
                                    <div class="flex w-full items-center">
                                            <span
                                                    class="mr-2 block h-3 w-full max-w-3 rounded-full bg-[#6577F3]"
                                            ></span>
                                        <p
                                                class="flex w-full justify-between text-sm font-medium text-black dark:text-white"
                                        >
                                            <span> 4점 </span>
                                            <span> 34% </span>
                                        </p>
                                    </div>
                                </div>
                                <div class="w-full px-8 sm:w-1/2">
                                    <div class="flex w-full items-center">
                                            <span
                                                    class="mr-2 block h-3 w-full max-w-3 rounded-full bg-[#8FD0EF]"
                                            ></span>
                                        <p
                                                class="flex w-full justify-between text-sm font-medium text-black dark:text-white"
                                        >
                                            <span> 3점 </span>
                                            <span> 45% </span>
                                        </p>
                                    </div>
                                </div>
                                <div class="w-full px-8 sm:w-1/2">
                                    <div class="flex w-full items-center">
                                            <span
                                                    class="mr-2 block h-3 w-full max-w-3 rounded-full bg-[#0FADCF]"
                                            ></span>
                                        <p
                                                class="flex w-full justify-between text-sm font-medium text-black dark:text-white"
                                        >
                                            <span> 2점 </span>
                                            <span> 12% </span>
                                        </p>
                                    </div>
                                </div>
                                <div class="w-full px-8 sm:w-1/2">
                                    <div class="flex w-full items-center">
                                            <span
                                                    class="mr-2 block h-3 w-full max-w-3 rounded-full bg-[#FF6F61]"
                                            ></span>
                                        <p
                                                class="flex w-full justify-between text-sm font-medium text-black dark:text-white"
                                        >
                                            <span> 1점 </span>
                                            <span> 12% </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <!-- ====== Chart Three End -->
                            <!-- 끝 -->
                        </div>
                    </div>
                    <div class="col-lg-6 col-12">
                        <div class="info-body">
                            <!--시작-->
                            <!-- ====== Chart Two Start -->
                            <div class="mb-4 justify-between gap-4 sm:flex">
                                <div>
                                    <h4 class="text-xl font-bold text-black dark:text-white">
                                        분야별 별점
                                    </h4>
                                </div>
                                <div>
                                    <div class="relative z-20 inline-block">
                                        <span class="absolute right-3 top-1/2 z-10 -translate-y-1/2">
                                                <svg
                                                        width="10"
                                                        height="6"
                                                        viewBox="0 0 10 6"
                                                        fill="none"
                                                        xmlns="http://www.w3.org/2000/svg"
                                                >
                                                    <path
                                                            d="M0.47072 1.08816C0.47072 1.02932 0.500141 0.955772 0.54427 0.911642C0.647241 0.808672 0.809051 0.808672 0.912022 0.896932L4.85431 4.60386C4.92785 4.67741 5.06025 4.67741 5.14851 4.60386L9.09079 0.896932C9.19376 0.793962 9.35557 0.808672 9.45854 0.911642C9.56151 1.01461 9.5468 1.17642 9.44383 1.27939L5.50155 4.98632C5.22206 5.23639 4.78076 5.23639 4.51598 4.98632L0.558981 1.27939C0.50014 1.22055 0.47072 1.16171 0.47072 1.08816Z"
                                                            fill="#637381"
                                                    />
                                                    <path
                                                            fill-rule="evenodd"
                                                            clip-rule="evenodd"
                                                            d="M1.22659 0.546578L5.00141 4.09604L8.76422 0.557869C9.08459 0.244537 9.54201 0.329403 9.79139 0.578788C10.112 0.899434 10.0277 1.36122 9.77668 1.61224L9.76644 1.62248L5.81552 5.33722C5.36257 5.74249 4.6445 5.7544 4.19352 5.32924C4.19327 5.32901 4.19377 5.32948 4.19352 5.32924L0.225953 1.61241C0.102762 1.48922 -4.20186e-08 1.31674 -3.20269e-08 1.08816C-2.40601e-08 0.905899 0.0780105 0.712197 0.211421 0.578787C0.494701 0.295506 0.935574 0.297138 1.21836 0.539529L1.22659 0.546578ZM4.51598 4.98632C4.78076 5.23639 5.22206 5.23639 5.50155 4.98632L9.44383 1.27939C9.5468 1.17642 9.56151 1.01461 9.45854 0.911642C9.35557 0.808672 9.19376 0.793962 9.09079 0.896932L5.14851 4.60386C5.06025 4.67741 4.92785 4.67741 4.85431 4.60386L0.912022 0.896932C0.809051 0.808672 0.647241 0.808672 0.54427 0.911642C0.500141 0.955772 0.47072 1.02932 0.47072 1.08816C0.47072 1.16171 0.50014 1.22055 0.558981 1.27939L4.51598 4.98632Z"
                                                            fill="#637381"
                                                    />
                                                </svg>
                                            </span>
                                    </div>
                                </div>
                            </div>

                            <button id="fetchDataBtn">데이터 로드</button>
                            <div>
                                <div id="chartTwo" class="-mb-9 -ml-5"></div>
                            </div>
                            <!-- ====== Chart Two End -->
                            <!--끝-->
                            <p>제품에 대한 정보 및 데이터 들을 작성하는 공간</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4 col-12">
                    <div class="single-block give-review">
                        <h4 th:text="${product.product_total_rating}+' (총 별점)'">4.5 (총 별점)</h4>
                        <ul>
                            <li>
                                <span th:text="'5 stars - ' +${ratingCount[5]}">5 stars - 38</span>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                            </li>
                            <li>
                                <span th:text="'4 stars - ' +${ratingCount[4]}">4 stars - 10</span>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star"></i>
                            </li>
                            <li>
                                <span th:text="'3 stars - ' +${ratingCount[3]}">3 stars - 3</span>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                            </li>
                            <li>
                                <span th:text="'2 stars - ' +${ratingCount[2]}">2 stars - 1</span>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                            </li>
                            <li>
                                <span th:text="'1 stars - ' +${ratingCount[1]}">1 star - 0</span>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                            </li>
                        </ul>
                        <!-- Button trigger modal -->
                        <button type="button" class="btn review-btn" data-bs-toggle="modal"
                                data-bs-target="#exampleModal">
                            리뷰 남기기
                        </button>
                    </div>
                </div>
                <div class="col-lg-8 col-12">
                    <div class="single-block">
                        <div class="reviews">
                            <h4 class="title">리뷰 리스트</h4>
                            <!-- Start Single Review -->
                            <div th:each="review:${reviews}">
                                <div class="single-review">
                                    <img th:src="'imgs/user/'+ ${review.user.user_name}+'_userImg.jpg'" alt="#">
                                    <div class="review-info">
                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                            <h4 th:text="${review.content}">Awesome quality for the price
                                            </h4>
                                            <!--히든 버튼 th:if추가 조건 만족시 해제하게-->
                                            <div style="display: flex; justify-content: flex-end; gap: 10px; align-items: center; margin-top: 10px;">
                                                <form th:action="@{/reviewDelete/{review_id}(review_id=${review.review_id})}"
                                                      method="Post">
                                                    <button th:if="${review.user.user_id == user.user_id || user.userRole == 9}"
                                                            type="submit">리뷰삭제
                                                    </button>
                                                </form>
                                                <!-- 검색용 -->
                                                <button th:if="${review.user.user_id == user.user_id || user.userRole == 9}" type="button" class="btn review-btn"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#updateReviewModal"
                                                        th:data-review-id="${review.review_id}"
                                                        th:data-review-user-user-id="${review.user.user_id}"
                                                        th:data-review-coef-rating="${review.coef_rating}"
                                                        th:data-review-durability-rating="${review.durability_rating}"
                                                        th:data-review-quality-rating="${review.quality_rating}"
                                                        th:data-review-design-rating="${review.design_rating}"
                                                        th:data-review-content="${review.content}"
                                                        onclick="openReviewModal(this)">
                                                    리뷰 수정
                                                </button>
                                            </div>
                                        </div>
                                        <span th:text="${#dates.format(review.created_date, 'yyyy-MM-dd')}"></span>
                                        <h4><span th:text="${review.user.user_name}">유저 닉네임</span></h4>

                                        <ul class="stars2">
                                            <li> <!--class="starss"-->
                                                <span>총 별점 : </span>
                                                <span class="starss"
                                                      th:each="i : ${#numbers.sequence(1, review.total_rating)}">
                                                    <i class="lni lni-star-filled"></i>
                                                </span><span class="starss" th:if="${review.total_rating} != 5"
                                                             th:each="i : ${#numbers.sequence(1, 5 - review.total_rating)}"><!-- 비어있는 별점 -->
                                                    <i class="lni lni-star"></i>
                                                </span>
                                            </li>
                                            <li>
                                                <span>가성비 별점 : </span>
                                                <span class="starss"
                                                      th:each="i : ${#numbers.sequence(1, review.coef_rating)}">
                                                    <i class="lni lni-star-filled"></i>
                                                </span><span class="starss" th:if="${review.coef_rating} != 5"
                                                             th:each="i : ${#numbers.sequence(1, 5 - review.coef_rating)}"><!-- 비어있는 별점 -->
                                                    <i class="lni lni-star"></i>
                                                </span>
                                            </li>
                                            <li>
                                                <span>내구성 별점 : </span>
                                                <span class="starss"
                                                      th:each="i : ${#numbers.sequence(1, review.durability_rating)}">
                                                    <i class="lni lni-star-filled"></i>
                                                </span><span class="starss" th:if="${review.durability_rating} != 5"
                                                             th:each="i : ${#numbers.sequence(1, 5 - review.durability_rating)}"><!-- 비어있는 별점 -->
                                                    <i class="lni lni-star"></i>
                                                </span>
                                            </li>
                                            <li>
                                                <span>품질 별점 : </span>
                                                <span class="starss"
                                                      th:each="i : ${#numbers.sequence(1, review.quality_rating)}">
                                                    <i class="lni lni-star-filled"></i>
                                                </span><span class="starss" th:if="${review.quality_rating} != 5"
                                                             th:each="i : ${#numbers.sequence(1, 5 - review.quality_rating)}"><!-- 비어있는 별점 -->
                                                    <i class="lni lni-star"></i>
                                                </span>
                                            </li>
                                            <li>
                                                <span>디자인 별점 : </span>
                                                <span class="starss"
                                                      th:each="i : ${#numbers.sequence(1, review.design_rating)}">
                                                    <i class="lni lni-star-filled"></i>
                                                </span><span class="starss" th:if="${review.design_rating} != 5"
                                                             th:each="i : ${#numbers.sequence(1, 5 - review.design_rating)}"><!-- 비어있는 별점 -->
                                                    <i class="lni lni-star"></i>
                                                </span>
                                            </li>
                                        </ul>

                                        <!-- 👍 좋아요 버튼 -->
                                        <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                                            <button class="like-btn"
                                                    th:data-review-id="${review.review_id}"
                                                    th:data-user-id="${user.user_id}"
                                                    onclick="likeReview(this)"
                                                    th:classappend="${review.isLiked} ? 'liked' : ''">
                                                👍 <span th:text="${review.likeCount}">0</span>


                                            </button>
                                        </div>

                                        <div th:if="${review.review_id} == ${reviewImg.review.review_id}"
                                             th:each="reviewImg:${reviewImgs}">
                                            <img class="h-50 w-50 review_img"
                                                 th:src="'imgs/review/'+ ${reviewImg.review_img_name}">
                                        </div>

                                        <p th:text="${product.product_name}">Lorem ipsum dolor sit amet, consectetur
                                            adipiscing elit, sed do eiusmod
                                            tempor...</p>
                                    </div>
                                </div>
                            </div>
                            <!-- End Single Review -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</section>
<!-- End Item Details -->

<!-- Review Modal -->
<div class="modal fade review-modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form th:action="@{/review}" method="post" enctype="multipart/form-data">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Leave a Review</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <!-- 사용자 ID와 제품 ID를 숨은 필드로 전송 -->
                    <input type="hidden" id="user_id" name="user_id" th:value="${user.user_id}"/>
                    <input type="hidden" id="product_id" name="product_id" th:value="${product.product_id}"/>

                    <div class="row">
                        <!-- 개별 평점 입력 -->
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="coef-rating">Coefficient Rating</label>
                                <input class="form-control" type="number" id="coef-rating" name="coef_rating" min="1"
                                       max="5" required>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="durability-rating">Durability Rating</label>
                                <input class="form-control" type="number" id="durability-rating"
                                       name="durability_rating" min="1" max="5" required>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="quality-rating">Quality Rating</label>
                                <input class="form-control" type="number" id="quality-rating" name="quality_rating"
                                       min="1" max="5" required>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="design-rating">Design Rating</label>
                                <input class="form-control" type="number" id="design-rating" name="design_rating"
                                       min="1" max="5" required>
                            </div>
                        </div>
                    </div>

                    <!-- 리뷰 내용 -->
                    <div class="form-group">
                        <label for="review-message">Review</label>
                        <textarea class="form-control" id="content" name="content" rows="8" required></textarea>
                    </div>

                    <!-- 파일 업로드 -->
                    <div class="form-group">
                        <label for="files">Upload Images</label>
                        <input class="form-control" type="file" name="files" id="files" accept="image/*" multiple>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Submit Review</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- End Review Modal -->

<!-- Review Update Modal -->
<div class="modal fade review-modal" id="updateReviewModal" tabindex="-1" aria-labelledby="updateReviewModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form th:action="@{/reviewUpdate}" method="post" enctype="multipart/form-data" id="reviewUpdateForm">
                <div class="modal-header">
                    <h5 class="modal-title" id="updateReviewModalLabel">리뷰 수정</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <!-- 숨은 필드 -->
                    <input type="hidden" id="reviewId" name="reviewId">
                    <input type="hidden" id="userId" name="userId"/>
                    <input type="hidden" id="productId" name="productId" th:value="${product.product_id}"/>

                    <!-- 기존 이미지 및 삭제 체크박스 -->
                    <div class="form-group">
                        <label>기존 이미지</label>
                        <div id="existingImages">
                            <div th:each="img : ${reviewImgs}" th:data-review-id="${img.review.review_id}"
                                 class="review-image" style="display: none;">
                                <img th:src="@{'/imgs/review/' + ${img.review_img_name}}" alt="Review Image"
                                     width="100">
                                <label>
                                    <input type="checkbox" name="deleteImgIds" th:value="${img.review_img_id}"> 삭제
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- 평점 입력 -->
                    <div class="row">
                        <div class="col-sm-6">
                            <label for="coefRating">가성비 별점</label>
                            <input class="form-control" type="number" id="coefRating" name="coefRating" min="1"
                                   max="5" required>
                        </div>

                        <div class="col-sm-6">
                            <label for="durabilityRating">내구성 별점</label>
                            <input class="form-control" type="number" id="durabilityRating"
                                   name="durabilityRating" min="1" max="5" required>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-sm-6">
                            <label for="qualityRating">품질 별점</label>
                            <input class="form-control" type="number" id="qualityRating" name="qualityRating"
                                   min="1" max="5" required>
                        </div>

                        <div class="col-sm-6">
                            <label for="designRating">디자인 별점</label>
                            <input class="form-control" type="number" id="designRating" name="designRating"
                                   min="1" max="5" required>
                        </div>
                    </div>

                    <!-- 리뷰 내용 -->
                    <div class="mt-3">
                        <label for="updateContent">리뷰 내용</label>
                        <textarea class="form-control" id="updateContent" name="updateContent" rows="5"
                                  required></textarea>
                    </div>

                    <!-- 이미지 추가 업로드 -->
                    <div class="mt-3">
                        <label for="updateFiles">이미지 추가</label>
                        <input class="form-control" type="file" name="files" id="updateFiles" accept="image/*" multiple>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">수정 완료</button>
                </div>
            </form>
        </div>
    </div>
</div>


<!--푸터 시작-->
<!-- Start Footer Area -->
<footer class="footer">
    <!-- Start Footer Middle -->
    <div class="footer-middle">
        <div class="container">
            <div class="bottom-inner">
                <div class="row">
                    <div class="col-lg-3 col-md-6 col-12">
                        <!-- Single Widget -->
                        <div class="single-footer f-contact">
                            <h3>연락처</h3>
                            <p class="phone">Phone: +1 (900) 33 169 7720</p>
                            <ul>
                                <li><span>Monday-Friday: </span> 9.00 am - 8.00 pm</li>
                                <li><span>Saturday: </span> 10.00 am - 6.00 pm</li>
                            </ul>
                            <p class="mail">
                                <a href="mailto:support@shopgrids.com">support@shopgrids.com</a>
                            </p>
                        </div>
                        <!-- End Single Widget -->
                    </div>
                    <div class="col-lg-3 col-md-6 col-12">
                        <!-- Single Widget -->
                        <div class="single-footer our-app">
                            <h3>모바일(지울거)</h3>
                            <ul class="app-btn">
                                <li>
                                    <a href="javascript:void(0)">
                                        <i class="lni lni-apple"></i>
                                        <span class="small-title">Download on the</span>
                                        <span class="big-title">App Store</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)">
                                        <i class="lni lni-play-store"></i>
                                        <span class="small-title">Download on the</span>
                                        <span class="big-title">Google Play</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <!-- End Single Widget -->
                    </div>
                    <div class="col-lg-3 col-md-6 col-12">
                        <!-- Single Widget -->
                        <div class="single-footer f-link">
                            <h3>인포메이션</h3>
                            <ul>
                                <li><a href="javascript:void(0)">About Us</a></li>
                                <li><a href="javascript:void(0)">Contact Us</a></li>
                                <li><a href="javascript:void(0)">Downloads</a></li>
                                <li><a href="javascript:void(0)">Sitemap</a></li>
                                <li><a href="javascript:void(0)">FAQs Page</a></li>
                            </ul>
                        </div>
                        <!-- End Single Widget -->
                    </div>
                    <div class="col-lg-3 col-md-6 col-12">
                        <!-- Single Widget -->
                        <div class="single-footer f-link">
                            <h3>카테고리</h3>
                            <ul>
                                <li><a href="javascript:void(0)">Computers & Accessories</a></li>
                                <li><a href="javascript:void(0)">Smartphones & Tablets</a></li>
                                <li><a href="javascript:void(0)">TV, Video & Audio</a></li>
                                <li><a href="javascript:void(0)">Cameras, Photo & Video</a></li>
                                <li><a href="javascript:void(0)">Headphones</a></li>
                            </ul>
                        </div>
                        <!-- End Single Widget -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Footer Middle -->
    <!-- Start Footer Bottom -->
    <div class="footer-bottom">
        <div class="container">
            <div class="inner-content">
                <div class="row align-items-center">
                    <div class="col-lg-4 col-12">
                        <div class="copyright">
                            <p>Designed and Developed by<a href="https://graygrids.com/" rel="nofollow"
                                                           target="_blank">GrayGrids</a></p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-12">
                        <div class="payment-gateway">
                        </div>
                    </div>
                    <div class="col-lg-4 col-12">
                        <ul class="socila">
                            <li>
                                <span>팔로잉:</span>
                            </li>
                            <li><a href="javascript:void(0)"><i class="lni lni-facebook-filled"></i></a></li>
                            <li><a href="javascript:void(0)"><i class="lni lni-twitter-original"></i></a></li>
                            <li><a href="javascript:void(0)"><i class="lni lni-instagram"></i></a></li>
                            <li><a href="javascript:void(0)"><i class="lni lni-google"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Footer Bottom -->
</footer>
<!--/ End Footer Area -->
<!--/ 푸터 끝 -->

<!-- ========================= scroll-top ========================= -->
<a href="#" class="scroll-top">
    <i class="lni lni-chevron-up"></i>
</a>

<!-- ========================= JS here ========================= -->
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/tiny-slider.js"></script>
<script src="assets/js/glightbox.min.js"></script>
<script src="assets/js/main.js"></script>
<script type="text/javascript">
    const current = document.getElementById("current");
    const opacity = 0.6;
    const imgs = document.querySelectorAll(".img");
    imgs.forEach(img => {
        img.addEventListener("click", (e) => {
            //reset opacity
            imgs.forEach(img => {
                img.style.opacity = 1;
            });
            current.src = e.target.src;
            //adding class
            //current.classList.add("fade-in");
            //opacity
            e.target.style.opacity = opacity;
        });
    });
</script>

<script
        defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015"
        integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ=="
        data-cf-beacon='{"rayId":"908827fb5bd27bd3","version":"2025.1.0","r":1,"token":"67f7a278e3374824ae6dd92295d38f77","serverTiming":{"name":{"cfExtPri":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}}}'
        crossorigin="anonymous">

</script>

<script>
    const product_id = [[${product_id}]];
</script>
<!-- JavaScript 코드 -->
<script src="assets/js/dataChart.js"></script>
<script src="assets/js/ReviewLike.js"></script>
<script src="assets/js/productSave.js"></script>

<script>
    function openReviewModal(button) {
        const reviewId = button.getAttribute("data-review-id");
        const reviewUserId = button.getAttribute("data-review-user-user-id");
        const coefRating = button.getAttribute("data-review-coef-rating");
        const durabilityRating = button.getAttribute("data-review-durability-rating");
        const qualityRating = button.getAttribute("data-review-quality-rating");
        const designRating = button.getAttribute("data-review-design-rating");
        const content = button.getAttribute("data-review-content");

        // 필드에 값 세팅
        document.getElementById("reviewId").value = reviewId;
        document.getElementById("userId").value = reviewUserId;
        document.getElementById("coefRating").value = coefRating;
        document.getElementById("durabilityRating").value = durabilityRating;
        document.getElementById("qualityRating").value = qualityRating;
        document.getElementById("designRating").value = designRating;
        document.getElementById("updateContent").value = content;




       // 모든 리뷰 이미지를 숨기고, 해당 reviewId에 맞는 이미지만 표시
       document.querySelectorAll(".review-image").forEach(imgDiv => {
           const imgReviewId = imgDiv.getAttribute("data-review-id");
           imgDiv.style.display = (imgReviewId === reviewId) ? "block" : "none";
       });
   }

</script>

</body>

</html>